# Errors file documentation

The errors file is a TSV file generated by GeoTest.

Errors are grouped by ID. If a particular stage has found an error with multiple records, all are grouped by the `error_id`.

**Interscript bugs are not reported by default**. Please run this script with `--bugs` to also return Interscript bugs in the report.

# `error_type`

## Pre-analysis errors

### uni_duplicate
In analyzed file, a record is supplied twice. UNI is expected to be an unique key, yet in the analyzed file more than one
record contains that key.

## Clustering errors
During the clustering phase, we attempt to generate a cluster of entries based on their `name_link` attribute. In theory, this should create
a 1-1 connection between a script (non-transliterated) entry and a transliterated entry. In practice, sometimes a cluster contains more than
2 entries - we tolerate that as long as there is exactly 1 script (non-transliterated) entry in such a cluster. Otherwise we report one
of the following errors:

### length
An entry is expected to be a cluster yet it contains less than 1 record.

### no_script
A cluster contains no entry pertaining to the script (original; non-transliterated) entry.

### no_transl
None of the cluster entries contain information about transliteration. **This will make us attempt to find the matching transliteration system.**

### too_much_script
A cluster contains more than one script (original; non-transliterated) entry.

### no_map
**This is an Interscript bug**. This entry means that there is no Interscript support for a given transliteration map.

## Testing errors
During the testing phase, we attempt to use the transliteration info (`transl_cd`) to transliterate the original name, then compare both records.

Since we are able to transliterate, a field `attempted_transliteration` will contain our attempted automated transliteration.

All those errors are reported, but it's possible that 

### casing
The entries match except for their casing.

### punctuation
The entries match except for their punctuation.

### casing_and_punctuation
The entries match except for their casing AND punctuation.

### spacing_or_punctuation
The entries match except for their spacing OR punctuation.

### casing_and_spacing_or_punctuation
The entries match except for their casing AND (spacing OR punctuation).

### transliteration
The entries **don't** match. **This will make us attempt to find the matching transliteration system.**

# Finding the transliteration system
In case an error type is `no_transl` or `transliteration` we will attempt to find the closest transliteration system. If there is one that
matches 100% (as reported 0 by the Levenshtein distance algorithm), a field `other_matching_maps` will contain a comma-separated list of maps
supported by Interscript that, when used, produce a 100% correct transliteration.

Do note, that in the case `lang_cd` is supplied, only maps pertaining to that language are tried to save some analysis time.
